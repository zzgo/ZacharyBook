## nosql与sql的使用场景的分析（简单）

### nosql概念

> NoSQL： Not Only SQL，本质也是一种数据库的技术，相对于传统数据库技术，他不会遵循一些约束，比如：SQL语句，ACID属性，表结构

### 优点

> 满足对数据库的高并发读写
>
> 对海量数据的高效存储和访问
>
> 对数据库高扩展和高可用性
>
> 灵活的数据结构，满足数据结构不固定的场景

### 缺点

> 一般不支持事务
>
> 实现复杂的SQL查询比较复杂
>
> 目前人员数据维护门槛较高（学习成本研究）
>
> 目前不是主流的数据库技术

## 了解NoSQL产品

| 序号 | 类型 | 应用场景 | 典型产品 |
| :--- | :--- | :--- | :--- |
| 1 | Key-value存储 | 缓存，处理高并发数据访问 | Redis memcached |
| 2 | 列式数据库 | 分布式文件系统 | Cassandra Hbase |
| 3 | 文档型数据库 | Web应用，并发能力较强，表结构可变 | mongoDB |
| 4 | 图结构数据库 | 社交网络，推荐系统，关注构建图谱 | infoGridNeo4J |

## 基本概念

### 什么是mongodb

> 是一个数据库，高性能，无模式，文档性，目前nosql中最热门的数据库，开源产品，基于C++开发的，是nosql数据库中功能最丰富，是最像关系数据库的

### 特性

> 面向集合文档的存储：适合存储Bson（json的扩展）形式的数据
>
> 格式自由，数据格式不固定，生产环境下修改结构都可以不影响程序的运行
>
> 强大的查询语句，面向对象的查询语言，基本覆盖sql语言所有能力
>
> 完整的索引支持，支持查询计划
>
> 支持复制和自动转移故障转移
>
> 支持二进制数据及大型对象（文件）的高效存储
>
> 使用分片集群提升系统扩展性
>
> 使用内存映射存储引擎，把磁盘的IO操作转换成为内存的操作

### 基本概念

> 1、系统上运行库的进程及节点集，一个实例可以有多个库
>
> 2、多个集合组成数据库，每个数据库都是完全独立的，有自己的用户，权限信息，独立的存储文件集
>
> 3、集合即是一组文档，如果说文档类似于行的话，则集合则相当于表，集合内的文档格式可以不同
>
> 4、文档是mongodb数据库的最小数据集单位，其基本概念为：由多个键-值有序组合在一起的数据单元

### ![](/assets/44ghghg.png)应不应该使用MongoDB？

> 并没有某个业务场景必须要使用 MongoDB才能解决，但使用 MongoDB 通常能让你以更低的成本解决问题（包括学习、开发、运维等成本）

| 应用特征 | Yes / No |
| :--- | :--- |
| 应用不需要事务及复杂join支持 | 必须Yes |
| 新应用，需求会变，数据模型无法确定，想快速迭代开发 | ？ |
| 应用需要2000-3000以上的读写QPS（更高也可以） | ？ |
| 应用需要TB甚至PB级别数据存储 | ? |
| 应用发展迅速，需要能快速水平扩展 | ? |
| 应用要求存储的数据不丢失 | ? |
| 应用需要99.999%高可用 | ? |
| 应用需要大量的地理位置查询、文本查询 | ？ |

> 如果上述有1个 Yes，可以考虑 MongoDB，2个及以上的 Yes，选择MongoDB绝不会后悔！

### Mongodb 使用场景

> MongoDB 的应用已经渗透到各个领域，比如游戏、物流、电商、内容管理、社交、物联网、视频直播
>
> 游戏场景，使用 MongoDB 存储游戏用户信息，用户的装备、积分等直接以内嵌文档的形式存储，方便查询、更新
>
> 物流场景，使用 MongoDB 存储订单信息，订单状态在运送过程中会不断更新，以 MongoDB 内嵌数组的形式来存储，一次查询就能将订单所有的变更读取出来。
>
> 社交场景，使用 MongoDB 存储存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、地点等功能
>
> 物联网场景，使用 MongoDB 存储所有接入的智能设备信息，以及设备汇报的日志信息，并对这些信息进行多维度的分析
>
> 视频直播，使用 MongoDB 存储用户信息、礼物信息等

### 不能使用的场景

> 高度事务性系统：例如银行、财务等系统。MongoDB对事物的支持较弱；
>
> 传统的商业智能应用：特定问题的数据分析，多数据实体关联，涉及到复杂的、高度优化的查询方式；
>
> 使用sql方便的时候；数据结构相对固定，使用sql进行查询统计更加便利的时候



